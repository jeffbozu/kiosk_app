#!/usr/bin/make -f

%:
	dh $@

override_dh_auto_install:
	# Crear estructura de directorios
	mkdir -p debian/kioskapp/opt/kioskapp
	mkdir -p debian/kioskapp/usr/local/bin
	
	# Copiar la aplicación Flutter compilada
	cp -r build/linux/x64/release/bundle/* debian/kioskapp/opt/kioskapp/
	
	# Copiar printer-agent
	cp -r printer-agent debian/kioskapp/opt/kioskapp/
	
	# Copiar qr-scanner-agent
	cp -r qr-scanner-agent debian/kioskapp/opt/kioskapp/
	
	# Crear enlace simbólico
	ln -sf /opt/kioskapp/kioskapp debian/kioskapp/usr/local/bin/kioskapp
	
	# Asegurar permisos de ejecución
	chmod +x debian/kioskapp/opt/kioskapp/kioskapp

override_dh_fixperms:
	dh_fixperms
	chmod 755 debian/kioskapp/opt/kioskapp/kioskapp
